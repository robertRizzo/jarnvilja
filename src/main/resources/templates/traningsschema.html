<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/layout :: head('Terminsschema - Järnvilja Kampsport')}"></head>
<body>
<header th:replace="~{fragments/layout :: header}"></header>

<main class="schedule-page">
    <h1>Terminsschema</h1>

    <div class="schedule-info">
        <p><strong>Klubbens öppettider:</strong>
            Mån–Fre: 08:00 – 22:00 | Lör–Sön: 08:00 – 14:00</p>
        <p><strong>Sparringpass</strong> kräver minst 6 månaders erfarenhet.
            <strong>Öppen matta</strong> är tillgänglig när inga schemalagda pass pågår.</p>
    </div>

    <div class="schedule-legend">
        <span class="legend-item"><span class="legend-dot cat-bjj"></span> BJJ</span>
        <span class="legend-item"><span class="legend-dot cat-thai"></span> Thaiboxning</span>
        <span class="legend-item"><span class="legend-dot cat-box"></span> Boxning</span>
        <span class="legend-item"><span class="legend-dot cat-fys"></span> Fys</span>
        <span class="legend-item"><span class="legend-dot cat-sparring"></span> Sparring</span>
    </div>

    <!-- Desktop: full table -->
    <div class="schedule-table-wrapper">
        <table class="schedule-table">
            <thead>
                <tr>
                    <th th:each="entry : ${scheduleByDay}"
                        th:text="${entry.key.name() == 'MONDAY' ? 'Måndag' :
                                   entry.key.name() == 'TUESDAY' ? 'Tisdag' :
                                   entry.key.name() == 'WEDNESDAY' ? 'Onsdag' :
                                   entry.key.name() == 'THURSDAY' ? 'Torsdag' :
                                   entry.key.name() == 'FRIDAY' ? 'Fredag' :
                                   entry.key.name() == 'SATURDAY' ? 'Lördag' : 'Söndag'}">Dag</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td th:each="entry : ${scheduleByDay}">
                        <div th:each="tc : ${entry.value}"
                             class="schedule-cell"
                             th:classappend="${tc.category != null ? 'cat-' + tc.category.name().toLowerCase() : ''}">
                            <div class="schedule-cell-title" th:text="${tc.title}">Titel</div>
                            <div class="schedule-cell-time">
                                <span th:text="${#temporals.format(tc.startTime, 'HH:mm')}">00:00</span>–<span th:text="${#temporals.format(tc.endTime, 'HH:mm')}">00:00</span>
                            </div>
                            <div class="schedule-cell-matta" th:text="${tc.matta.name() == 'MATTA_1' ? 'Matta 1' : 'Matta 2'}">Matta</div>
                            <div class="schedule-cell-trainer" th:if="${tc.trainer != null}" th:text="${tc.trainer.username}">Tränare</div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Mobile: stacked day view -->
    <div class="schedule-mobile">
        <details th:each="entry : ${scheduleByDay}" class="schedule-day-details">
            <summary th:text="${entry.key.name() == 'MONDAY' ? 'Måndag' :
                                entry.key.name() == 'TUESDAY' ? 'Tisdag' :
                                entry.key.name() == 'WEDNESDAY' ? 'Onsdag' :
                                entry.key.name() == 'THURSDAY' ? 'Torsdag' :
                                entry.key.name() == 'FRIDAY' ? 'Fredag' :
                                entry.key.name() == 'SATURDAY' ? 'Lördag' : 'Söndag'}"
                     th:classappend="${entry.value.size()} + ' pass'">Dag</summary>
            <div class="schedule-day-list">
                <div th:each="tc : ${entry.value}"
                     class="schedule-cell"
                     th:classappend="${tc.category != null ? 'cat-' + tc.category.name().toLowerCase() : ''}">
                    <div class="schedule-cell-title" th:text="${tc.title}">Titel</div>
                    <div class="schedule-cell-time">
                        <span th:text="${#temporals.format(tc.startTime, 'HH:mm')}">00:00</span>–<span th:text="${#temporals.format(tc.endTime, 'HH:mm')}">00:00</span>
                        <span class="schedule-cell-matta" th:text="${tc.matta.name() == 'MATTA_1' ? '· Matta 1' : '· Matta 2'}">Matta</span>
                    </div>
                    <div class="schedule-cell-trainer" th:if="${tc.trainer != null}" th:text="${tc.trainer.username}">Tränare</div>
                </div>
            </div>
        </details>
    </div>
</main>

<footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>
